(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{34:function(e,a,t){e.exports=t(64)},40:function(e,a,t){},64:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(32),c=t.n(l),s=(t(39),t(40),t(14)),i=t(2),o=t(1),m=t.n(o),u=t(4),d=t(9),h=t(5),v=t(10),p=t(11),f=t(13),E=t(12),g=t(16),N=t.n(g),b=function(e){return N.a.get("/api/movies/".concat(e,"/"))},w=function(e){var a=localStorage.getItem("token"),t={headers:{Authorization:"Bearer ".concat(a)}};return N.a.post("/api/movies/",e,t)},y=function(e,a){var t=localStorage.getItem("token"),n={headers:{Authorization:"Bearer ".concat(t)}};return N.a.put("/api/movies/".concat(e,"/"),a,n)},O=function(e){var a=localStorage.getItem("token"),t={headers:{Authorization:"Bearer ".concat(a)}};return N.a.delete("/api/movies/".concat(e,"/"),t)},j=function(e){return N.a.post("/api/auth/register/",e)},C=function(e){return N.a.post("/api/auth/login/",e)},D=function(e){var a=localStorage.getItem("token"),t={headers:{Authorization:"Bearer ".concat(a)}};return N.a.post("/api/comments/",e,t)},x=function(e){Object(f.a)(t,e);var a=Object(E.a)(t);function t(){var e;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={movie:null,formdata:{text:"",rating:""}},e.handleChange=function(a){var t=Object(h.a)(Object(h.a)({},e.state.formData),{},Object(d.a)({},a.target.name,a.target.value));e.setState({formData:t})},e.handleSubmit=function(){var a=Object(u.a)(m.a.mark((function a(t){var n,r;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),e.state.formData.movie=e.state.movie.id,n=e.state.movie.id,a.next=5,D(e.state.formData);case 5:r=a.sent,console.log(r),e.props.history.push("/movies/".concat(n));case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleDelete=Object(u.a)(m.a.mark((function a(){var t,n;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.props.match.params.id,n=O(t),a.next=4,O(t);case 4:console.log(n),e.props.history.push("/");case 6:case"end":return a.stop()}}),a)}))),e}return Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(m.a.mark((function e(){var a,t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.match.params.id,e.next=3,b(a);case 3:t=e.sent,this.setState({movie:t.data});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,a=e.movie,t=e.text,n=e.rating;return a?r.a.createElement("div",{className:"show-page"},r.a.createElement("div",{className:"details"},r.a.createElement("div",{className:"poster-view"},r.a.createElement("img",{src:a.image,key:a.image,alt:a.title})),r.a.createElement("div",{className:"main-right"},r.a.createElement("div",{className:"right-box"},r.a.createElement("div",{className:"movie-title"},r.a.createElement("h1",null,a.title,"\xa0"),r.a.createElement("h2",null,"(",a.release,")")),r.a.createElement("div",{className:"movie-info"},r.a.createElement("h3",null,a.age_rating,"\xa0"),r.a.createElement("div",{className:"genres"},r.a.createElement("h4",null," ",a.genre.map((function(e){return e.name})).join(", ")," ")),r.a.createElement("div",{className:"duration"},r.a.createElement("h4",null,a.duration))),r.a.createElement("div",{className:"overview"},r.a.createElement("h1",null,"Overview"),r.a.createElement("div",{className:"description"},r.a.createElement("h2",null,a.description))),r.a.createElement("div",{className:"cast"},r.a.createElement("div",{className:"director"},r.a.createElement("h5",null,"Director"),r.a.createElement("h4",null,a.director)),r.a.createElement("div",{className:"starring"},r.a.createElement("h5",null,"Starring"),r.a.createElement("h4",null,a.starring))),r.a.createElement("div",{className:"trailer-parent"},r.a.createElement("div",{className:"trailer"},r.a.createElement("button",null,r.a.createElement("a",{href:a.trailer},"Play Trailer"))),r.a.createElement("div",{className:"edit-buttons"},r.a.createElement(s.b,{to:"/movies/".concat(a.id,"/edit"),className:"button"},"Edit"),r.a.createElement("button",{onClick:this.handleDelete,className:"button"},"Delete")))))),r.a.createElement("div",{className:"next-page"},r.a.createElement("div",{className:"comments-left"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"review-column is-two-thirds is-offset-one-quarter box"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Add A Review"),r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"textarea",placeholder:"comments",name:"text",value:t,onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Rating"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"Choose 1-5",name:"rating",value:n,onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("button",{type:"submit",className:"button is-fullwidth is-dark"},"Submit")))),r.a.createElement("div",{className:"comments-right"},r.a.createElement("div",{className:"comments-box"},r.a.createElement("div",{className:"comments-title"},r.a.createElement("h1",null,"Reviews")),r.a.createElement("hr",null),r.a.createElement("div",{className:"user-reviews-parent"},r.a.createElement("div",{className:"user-reviews"},a.comments.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"comment-text"},r.a.createElement("h3",null,"User: ",e.user.username),r.a.createElement("p",null,"Comment: ",e.text)),r.a.createElement("div",{className:"comment-rating"},r.a.createElement("p",null,"Rating: ",e.rating)),r.a.createElement("div",{className:"comment-rating"},r.a.createElement("p",null,"Created at: ",e.created_at)),r.a.createElement("hr",null))})))))))):null}}]),t}(r.a.Component),k=function(e){var a=e.handleChange,t=e.handleSubmit,n=e.formData,l=n.title,c=n.image,s=n.description,i=n.starring,o=n.release,m=n.director,u=n.duration,d=n.age_rating,h=n.trailer;return r.a.createElement("div",{className:"columns"},r.a.createElement("form",{onSubmit:t,className:"column add-movie is-one-third is-offset-one-third box"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Add / Edit A Movie"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"Title (Required)",name:"title",value:l,onChange:a}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Image URL (required)",name:"image",value:c,onChange:a}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"input",type:"text",placeholder:"Description (required)",name:"description",value:s,onChange:a}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Starring (seperated by commas - required)",name:"starring",value:i,onChange:a}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"Release Year (required)",name:"release",value:o,onChange:a}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"Director(required)",name:"director",value:m,onChange:a}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"Duration (eg: 1h 45m)",name:"duration",value:u,onChange:a}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"Age Rating (eg. 12A or 18)",name:"age_rating",value:d,onChange:a}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"Trailer URL(required)",name:"trailer",value:h,onChange:a}))),r.a.createElement("div",{className:"field"},r.a.createElement("button",{type:"submit",className:"button is-fullwidth"},"Submit"))))},S=function(e){Object(f.a)(t,e);var a=Object(E.a)(t);function t(){var e;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={formData:{title:"",genre:[1],image:"",description:"",starring:"",release:"",director:"",duration:"",age_rating:"",trailer:""}},e.handleChange=function(a){var t=Object(h.a)(Object(h.a)({},e.state.formData),{},Object(d.a)({},a.target.name,a.target.value));console.log(t),e.setState({formData:t})},e.handleSubmit=function(){var a=Object(u.a)(m.a.mark((function a(t){var n;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),a.next=3,w(e.state.formData);case 3:n=a.sent,console.log(n),e.props.history.push("/movies/".concat(n.data.id));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e}return Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement(k,{handleChange:this.handleChange,handleSubmit:this.handleSubmit,formData:this.state.formData})))}}]),t}(r.a.Component),A=function(e){Object(f.a)(t,e);var a=Object(E.a)(t);function t(){var e;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={formData:{title:"",image:"",genre:[1],description:"",starring:"",release:"",director:"",duration:"",age_rating:"",trailer:"",liked_by:[]}},e.handleChange=function(a){console.log(a.target);var t=Object(h.a)(Object(h.a)({},e.state.formData),{},Object(d.a)({},a.target.name,a.target.value));e.setState({formData:t})},e.handleSubmit=function(){var a=Object(u.a)(m.a.mark((function a(t){var n,r,l,c,s;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),n=e.state.formData.genre.map((function(e){return e.id})),console.log(n),e.state.formData.genre=n,r=e.state.formData.user,console.log(r),e.state.formData.user=r.id,l=e.state.formData,console.log(l),e.state.formData.liked_by=l.value,c=e.props.match.params.id,a.next=13,y(c,e.state.formData);case 13:s=a.sent,console.log(s),e.props.history.push("/movies/".concat(c));case 16:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e}return Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(m.a.mark((function e(){var a,t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.match.params.id,e.next=3,b(a);case 3:t=e.sent,this.setState({formData:t.data});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement(k,{handleChange:this.handleChange,handleSubmit:this.handleSubmit,formData:this.state.formData})))}}]),t}(r.a.Component),_=function(e){var a=e.title,t=e.image,n=e.id;return r.a.createElement("div",{id:n,className:"main"},r.a.createElement(s.b,{to:"/movies/".concat(n)},r.a.createElement("div",{className:"row-posters"},r.a.createElement("div",{className:"row-poster"},r.a.createElement("img",{src:t,alt:a})))))},I=function(e){Object(f.a)(t,e);var a=Object(E.a)(t);function t(){var e;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={movies:[]},e}return Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/api/movies/");case 2:a=e.sent,this.setState({movies:a.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.movies,a=e.filter((function(e){return e.genre.includes(1)})),t=e.filter((function(e){return e.genre.includes(3)})),n=e.filter((function(e){return e.genre.includes(8)}));return this.state.movies?r.a.createElement("div",{className:"home-main"},r.a.createElement("div",{className:"hero"},r.a.createElement("div",{className:"title"},r.a.createElement("img",{className:"featured",src:"https://free4kwallpapers.com/uploads/originals/2020/05/01/interstellar-wallpaper.jpg",alt:"featured-movie"}),r.a.createElement("a",{href:"https://www.youtube.com/watch?v=zSWdZVtXT7E&t=10s"},r.a.createElement("h2",null,"Play Trailer"))),r.a.createElement("div",{className:"home-titles"},r.a.createElement("h1",null,"MOST POPULAR")),r.a.createElement("div",{className:"movie-row"},this.state.movies.map((function(e){return r.a.createElement(_,Object.assign({key:e.id},e))}))),r.a.createElement("div",{className:"home-titles"},r.a.createElement("h1",null,"COMEDIES")),r.a.createElement("div",{className:"movie-row"},a.map((function(e){return r.a.createElement(_,Object.assign({key:e.id},e))}))),r.a.createElement("div",{className:"home-titles"},r.a.createElement("h1",null,"THRILLERS")),r.a.createElement("div",{className:"movie-row"},t.map((function(e){return r.a.createElement(_,Object.assign({key:e.id},e))}))),r.a.createElement("div",{className:"home-titles"},r.a.createElement("h1",null,"ANIMATION / FAMILY")),r.a.createElement("div",{className:"movie-row"},n.map((function(e){return r.a.createElement(_,Object.assign({key:e.id},e))}))))):null}}]),t}(r.a.Component),R=function(e){localStorage.setItem("token",e)},L=function(){console.log("getting payload");var e=localStorage.getItem("token");if(!e)return!1;var a=e.split(".");return!(a.length<3)&&(console.log(a),JSON.parse(atob(a[1])))},M=function(){var e=L();if(!e)return!1;var a=Math.floor(Date.now()/1e3);return console.log(a,e.exp),a<e.exp},P=Object(i.f)((function(){return r.a.createElement("nav",{className:"navbar is-transparent"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"navbar-start"},r.a.createElement("a",{className:"navbar-item",href:"/"},r.a.createElement("img",{id:"logo",src:"https://www.themoviedb.org/assets/2/v4/logos/v2/blue_short-8e7b30f73a4020692ccca9c88bafe5dcb6f8a62a4c6bc55cd9ba82bb2cd95f6c.svg",alt:"formula1",width:"160",height:"50"})),r.a.createElement(s.b,{to:"/",className:"navbar-item"},"Home")),r.a.createElement("div",{className:"navbar-end"},M()&&r.a.createElement(s.b,{to:"/movies/new",className:"navbar-item"},"Add A Movie"),!M()&&r.a.createElement(s.b,{to:"/register",className:"navbar-item"},"Register"),!M()&&r.a.createElement(s.b,{to:"/login",className:"navbar-item"},"Login"),M()&&r.a.createElement(s.b,{to:"/",onClick:function(){localStorage.removeItem("token")},className:"navbar-item"},"Logout"))))})),q=function(e){Object(f.a)(t,e);var a=Object(E.a)(t);function t(){var e;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={formData:{username:"",email:"",first_name:"",last_name:"",profileImage:"",password:"",password_confirmation:""}},e.handleChange=function(a){console.log(a.target);var t=Object(h.a)(Object(h.a)({},e.state.formData),{},Object(d.a)({},a.target.name,a.target.value));console.log(t),e.setState({formData:t})},e.handleSubmit=function(){var a=Object(u.a)(m.a.mark((function a(t){var n;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),a.next=3,j(e.state.formData);case 3:n=a.sent,console.log(n),e.props.history.push("login");case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e}return Object(p.a)(t,[{key:"render",value:function(){var e=this.state,a=e.username,t=e.email,n=e.profileImage,l=e.first_name,c=e.last_name,s=e.password,i=e.password_confirmation;return r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"columns"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"column is-one-third is-offset-one-third box"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Register"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"Username",name:"username",value:a,onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"Email",name:"email",value:t,onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"First Name",name:"first_name",value:l,onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"Last Name",name:"last_name",value:c,onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"Profile Image URL",name:"profile_image",value:n,onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"password",className:"input",placeholder:"Password",name:"password",value:s,onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"password",className:"input",placeholder:"Password Confirmation",name:"password_confirmation",value:i,onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("button",{type:"submit",className:"button is-fullwidth"},"Register"))))))}}]),t}(r.a.Component),T=function(e){Object(f.a)(t,e);var a=Object(E.a)(t);function t(){var e;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={formData:{email:"",password:""}},e.handleChange=function(a){console.log(a.target);var t=Object(h.a)(Object(h.a)({},e.state.formData),{},Object(d.a)({},a.target.name,a.target.value));console.log(t),e.setState({formData:t})},e.handleSubmit=function(){var a=Object(u.a)(m.a.mark((function a(t){var n;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),a.next=3,C(e.state.formData);case 3:n=a.sent,console.log(n),R(n.data.token),e.props.history.push("/");case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e}return Object(p.a)(t,[{key:"render",value:function(){var e=this.state,a=e.email,t=e.password;return r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"columns"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"column is-one-third is-offset-one-third box"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Email"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"Email",name:"email",value:a,onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Password"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"password",className:"input",placeholder:"Password",name:"password",value:t,onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("button",{type:"submit",className:"button is-fullwidth"},"Login"))))))}}]),t}(r.a.Component),U=function(){return r.a.createElement("footer",{className:"footer has-background-grey-darker"},r.a.createElement("div",{className:"content has-text-centered"},r.a.createElement("p",{className:"has-text-white"},"Made with",r.a.createElement("span",{role:"img","aria-label":"heart emoji"}," \ud83d\udc9b \ud83d\udcfa "),"at GA LDN 2020")))},z=function(){return r.a.createElement(s.a,null,r.a.createElement(P,null),r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/movies/:id/edit",component:A}),r.a.createElement(i.a,{path:"/movies/new",component:S}),r.a.createElement(i.a,{path:"/movies/:id",component:x}),r.a.createElement(i.a,{exact:!0,path:"/",component:I}),r.a.createElement(i.a,{path:"/register",component:q}),r.a.createElement(i.a,{path:"/login",component:T})),r.a.createElement(U,null))};c.a.render(r.a.createElement(z,null),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.db0cf80e.chunk.js.map